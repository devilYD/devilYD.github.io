---
layout:         post
title:          关于DNS(一)
subtitle:       什么是DNS
date:           2022-3-5
auther:         YD
header-img:     img/YD-fg.jpg
catalog:            true
tags:
        - 网络
        - 日常

---

# 关于DNS(一)

## 什么是DNS

网络出现的早期 是使用IP地址通讯的，那时就几台主机通讯。但是随着接入网络主机的增多，这种数字标识的地址非常不便于记忆，UNIX上就出现了建立一个叫做hosts的文件(Linux和windows也继承保留了这个文件)。这个文件中记录这主机名称和IP地址的对应表。这样只要输入主机名称，系统就会去加载hosts文件并查找对应关系，找到对应的IP，就可以访问这个IP的主机了。

但是后来主机太多了，无法保证所有人都能拿到统一的最新的hosts文件，就出现了在文件服务器上集中存放hosts文件，以供下载使用。互联网规模进一步扩大，这种方式也不堪负重，而且把所有地址解析记录形成的文件都同步到所有的客户机似乎也不是一个好办法。这时DNS系统出现了，随着解析规模的继续扩大，DNS系统也在不断的演化，直到现今的多层架构体系。

DNS（Domain Name System，域名系统），因特网上作为域名和IP地址互相映射的一个分布式数据库，能够使用户更方便的访问互联网，而不用去记住能够被机器直接读取的IP数串。通过主机名，最终得到该主机对应的IP地址的过程叫做域名解析（或主机名解析）。DNS协议运行在UDP协议之上，使用端口号53。

DNS的分布数据库是以域名为索引的，每个域名实际上就是一棵很大的逆向树中路径，这棵逆向树称为域名空间（domain name space），如下图所示树的最大深度不得超过127层，树中每个节点都有一个可以长达63个字符的文本标号。

## DNS的作用

DNS系统的作用

正向解析：根据主机名称（域名）查找对应的IP地址

反向解析：根据IP地址查找对应的主机域名

## DNS解析的具体流程

首先客户端位置是一台电脑或手机，在打开浏览器以后，比如输入[github](https://github.com/)的域名，它首先是由浏览器发起一个DNS解析请求，如果本地缓存服务器中找不到结果，则首先会向根服务器查询，根服务器里面记录的都是各个顶级域所在的服务器的位置，当向根请求的时候，根服务器就会返回.com服务器的位置信息。

递归服务器拿到.com的权威服务器地址以后，就会寻问com的权威服务器，知不知道https://github.com/的位置。这个时候com权威服务器查找并返回https://github.com/服务器的地址。

继续向https://github.com/的权威服务器去查询这个地址，由https://github.com/的服务器给出了地址：20.205.243.166 (当然我只是随便ping了一下github的网址得到的IP地址，由于国内运营商经常会劫持用户的DNS服务到他们自己的服务器所以不保证准确哦。)

最终才能进行http的链接，顺利访问网站。

当然，为了避免重复作业，一旦递归服务器拿到解析记录以后，就会在本地进行缓存，如果下次客户端再请求本地的递归域名服务器相同域名的时候，就不会再这样一层一层查了，因为本地服务器里面已经有缓存了，故直接访问即可。